<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>버티포트 관제 시스템</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}" />
  <script src="https://cdn.socket.io/4.6.1/socket.io.min.js"></script>
</head>
<body>
  <div class="container">
    <div class="left-panel">
      <div class="map-section">
        <h2>SLAM 지도</h2>
        <img id="map" src="{{ url_for('static', filename='map_sample.jpg') }}" />
      </div>
      <div class="camera-section">
        <h2>로봇 카메라</h2>
        <img id="camera" src="/camera_stream" />
      </div>
    </div>
    <div class="right-panel">
      <div class="info-box">
        <h3>드론 정보</h3>
        <p>위도: <span id="lat">-</span></p>
        <p>경도: <span id="lon">-</span></p>
        <p>고도: <span id="alt">-</span></p>
        <p>배터리: <span id="battery">-</span>%</p>
      </div>
      <div class="info-box">
        <h3>시스템 정보</h3>
        <p>로봇 상태: <span id="robot_status">-</span></p>
        <p>CPU 사용량: <span id="cpu">-</span>%</p>
        <p>RAM 사용량: <span id="ram">-</span>%</p>
        <p>네트워크 상태: <span id="net">-</span></p>
      </div>
    </div>
  </div>

  <script>
    const socket = io();
    socket.on('system_info', data => {
      document.getElementById('robot_status').textContent = data.robot_status;
      document.getElementById('cpu').textContent = data.cpu;
      document.getElementById('ram').textContent = data.ram;
      document.getElementById('net').textContent = data.net;
    });
    socket.on('drone_info', data => {
      document.getElementById('lat').textContent = data.lat;
      document.getElementById('lon').textContent = data.lon;
      document.getElementById('alt').textContent = data.alt;
      document.getElementById('battery').textContent = data.battery;
    });
  </script>
</body>
</html>
